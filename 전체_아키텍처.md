# Virtual Assistant - 전체 아키텍처

> 중간발표용 시각화 자료 (간결 버전)

---

## 🏗️ 전체 시스템 아키텍처

```mermaid
graph TB
    subgraph "Frontend - Electron"
        A[사용자]
        B[로그인<br/>OAuth<br/>Google/Kakao/Naver]
        C[챗봇 UI<br/>대화형 인터페이스]
    end
    
    subgraph "Backend - FastAPI"
        D[API Gateway]
        E1[HR 메뉴얼 모듈]
        E2[업무 메뉴얼 모듈]
        E3[보고서 작성 모듈]
        E4[심리상담 모듈]
        E5[브레인스토밍 모듈]
    end
    
    subgraph "AI/LLM"
        F[OpenAI API<br/>GPT-4o]
        G[임베딩<br/>text-embedding-3-large]
    end
    
    subgraph "Data Layer"
        H[(PostgreSQL<br/>사용자/세션)]
        I1[(ChromaDB<br/>HR RAG)]
        I2[(ChromaDB<br/>업무 RAG)]
        I3[(ChromaDB<br/>심리상담 RAG)]
        I4[(ChromaDB<br/>브레인스토밍 RAG)]
        J[Markdown<br/>채팅 히스토리]
    end
    
    A --> B
    B --> C
    C --> D
    
    D --> E1
    D --> E2
    D --> E3
    D --> E4
    D --> E5
    
    E1 --> F
    E2 --> F
    E3 --> F
    E4 --> F
    E5 --> F
    
    E1 --> I1
    E2 --> I2
    E4 --> I3
    E5 --> I4
    
    I1 --> G
    I2 --> G
    I3 --> G
    I4 --> G
    
    E1 --> H
    E2 --> H
    E3 --> H
    E4 --> H
    E5 --> H
    
    C --> J
    
    style A fill:#e3f2fd
    style C fill:#f3e5f5
    style D fill:#fff4e6
    style E5 fill:#fff9c4
    style F fill:#f3e5f5
    style H fill:#c8e6c9
    style I4 fill:#fff9c4
```

---

## 🔄 사용자 플로우 (간단 버전)

```mermaid
flowchart LR
    A[사용자 로그인] --> B{OAuth 인증<br/>Google/Kakao/Naver}
    B -->|성공| C[백엔드<br/>세션 생성]
    C --> D[프론트엔드<br/>챗봇 UI]
    
    D --> E{사용자 요청}
    
    E -->|HR 문의| F1[HR 메뉴얼 모듈]
    E -->|업무 문의| F2[업무 메뉴얼 모듈]
    E -->|보고서 작성| F3[보고서 작성 모듈]
    E -->|심리 상담| F4[심리상담 모듈]
    E -->|아이디어 필요| F5[브레인스토밍 모듈]
    
    F1 --> G[GPT-4o<br/>+ RAG]
    F2 --> G
    F3 --> G
    F4 --> G
    F5 --> G
    
    G --> H[AI 응답]
    H --> D
    
    style A fill:#e3f2fd
    style D fill:#f3e5f5
    style F5 fill:#fff9c4
    style G fill:#f3e5f5
```

---

## 📊 모듈별 구조

```mermaid
mindmap
  root((Virtual<br/>Assistant))
    프론트엔드
      Electron 데스크톱 앱
      OAuth 로그인
      챗봇 UI
    백엔드
      FastAPI
      5개 모듈
        HR 메뉴얼
        업무 메뉴얼
        보고서 작성
        심리상담
        브레인스토밍
    AI
      GPT-4o
      RAG 시스템
        영구 RAG
        Ephemeral RAG
      임베딩
    데이터
      PostgreSQL
      ChromaDB
      Markdown
```

---

## 🎯 5개 모듈 상세

| 모듈 | 기능 | RAG 사용 | 담당자 |
|------|------|----------|--------|
| **HR 메뉴얼** | 사내 인사 규정 안내 | ✅ 영구 RAG | 팀원 A |
| **업무 메뉴얼** | 업무 프로세스 가이드 | ✅ 영구 RAG | 팀원 B |
| **보고서 작성** | 자동 보고서 생성 | ❌ LLM만 | 팀원 C |
| **심리상담** | 심리 상담 챗봇 | ✅ 영구 RAG | 팀원 D |
| **브레인스토밍** | 아이디어 생성 | ✅ 영구 + Ephemeral RAG | 김진모 |

---

## 🔧 기술 스택

```mermaid
graph LR
    A[Frontend<br/>Electron]
    B[Backend<br/>FastAPI]
    C[AI<br/>OpenAI API]
    D[DB<br/>PostgreSQL<br/>ChromaDB]
    
    A -->|IPC| B
    B -->|REST API| C
    B -->|SQL/Vector| D
    
    style A fill:#e3f2fd
    style B fill:#fff4e6
    style C fill:#f3e5f5
    style D fill:#c8e6c9
```

### **Frontend**
- Electron (데스크톱 앱)
- HTML/CSS/JavaScript

### **Backend**
- FastAPI (Python)
- Pydantic (데이터 검증)
- OAuth 2.0 (인증)

### **AI/LLM**
- OpenAI GPT-4o (대화 생성)
- text-embedding-3-large (임베딩)
- LangChain (RAG 파이프라인)

### **Database**
- PostgreSQL (사용자/세션)
- ChromaDB (벡터 DB)
- Markdown (채팅 히스토리)

---

## 📌 핵심 특징

### **1. 모듈 격리 (DDD)**
- 각 팀원이 독립적으로 개발
- `backend/app/domain/[모듈명]/` 구조
- 코드 충돌 최소화

### **2. RAG 시스템**
- 모듈별 독립적인 ChromaDB 컬렉션
- 영구 RAG (매뉴얼 저장)
- Ephemeral RAG (임시 데이터, 브레인스토밍 전용)

### **3. OAuth 통합**
- Google, Kakao, Naver 로그인 지원
- 세션 기반 사용자 관리

### **4. 채팅 히스토리**
- Markdown 파일로 저장
- 10회마다 자동 요약
- 세션별 관리

---

## 🎨 발표 시 설명 예시

> "**Virtual Assistant**는 **Electron 기반 데스크톱 앱**으로,  
> **5개의 모듈**이 독립적으로 작동합니다.  
> 
> 사용자가 **챗봇**과 대화하면,  
> **백엔드**에서 **GPT-4o**와 **RAG 시스템**을 활용하여  
> **정확하고 구체적인 답변**을 제공합니다.  
> 
> 특히 **브레인스토밍 모듈**은 **이중 RAG 구조**를 사용하여  
> **실행 가능한 아이디어**를 생성하고,  
> **SWOT 분석**까지 자동으로 수행합니다.  
> 
> 모든 모듈은 **DDD 구조**로 완전히 격리되어,  
> 팀원들이 **충돌 없이 병렬 개발**할 수 있습니다."

---

## 🚀 향후 계획

### **Phase 1 (현재)** ✅
- 5개 모듈 개발 완료
- OAuth 로그인
- 기본 챗봇 기능

### **Phase 2 (예정)**
- Slack 연동
- TTS (음성 합성)
- 협업 기능 (여러 사용자)

### **Phase 3 (배포)**
- AWS/GCP 클라우드 배포
- HTTPS 적용
- 프로덕션 최적화

---

**작성 완료!** 🎉

